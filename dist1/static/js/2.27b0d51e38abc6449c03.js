webpackJsonp([2],{"+OTi":function(t,e,n){"use strict";var o=n("3Cgm");function i(){}var a=null,r={};function s(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,t!==i&&p(t,this)}function c(t,e){for(;3===t._i;)t=t._j;if(s._l&&s._l(t),0===t._i)return 0===t._h?(t._h=1,void(t._k=e)):1===t._h?(t._h=2,void(t._k=[t._k,e])):void t._k.push(e);!function(t,e){o(function(){var n=1===t._i?e.onFulfilled:e.onRejected;if(null!==n){var o=function(t,e){try{return t(e)}catch(t){return a=t,r}}(n,t._j);o===r?u(e.promise,a):l(e.promise,o)}else 1===t._i?l(e.promise,t._j):u(e.promise,t._j)})}(t,e)}function l(t,e){if(e===t)return u(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==typeof e||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return a=t,r}}(e);if(n===r)return u(t,a);if(n===t.then&&e instanceof s)return t._i=3,t._j=e,void f(t);if("function"==typeof n)return void p(n.bind(e),t)}t._i=1,t._j=e,f(t)}function u(t,e){t._i=2,t._j=e,s._m&&s._m(t,e),f(t)}function f(t){if(1===t._h&&(c(t,t._k),t._k=null),2===t._h){for(var e=0;e<t._k.length;e++)c(t,t._k[e]);t._k=null}}function d(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,o=function(t,e,n){try{t(e,n)}catch(t){return a=t,r}}(t,function(t){n||(n=!0,l(e,t))},function(t){n||(n=!0,u(e,t))});n||o!==r||(n=!0,u(e,a))}t.exports=s,s._l=null,s._m=null,s._n=i,s.prototype.then=function(t,e){if(this.constructor!==s)return function(t,e,n){return new t.constructor(function(o,a){var r=new s(i);r.then(o,a),c(t,new d(e,n,r))})}(this,t,e);var n=new s(i);return c(this,new d(t,e,n)),n}},"/x+h":function(t,e,n){"use strict";var o=n("+OTi"),i=n("IYKl");t.exports=o,o.denodeify=function(t,e){return"number"==typeof e&&e!==1/0?function(t,e){for(var n=[],i=0;i<e;i++)n.push("a"+i);var r=["return function ("+n.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(n).concat([a]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],r)(o,t)}(t,e):function(t){for(var e=Math.max(t.length-1,3),n=[],i=0;i<e;i++)n.push("a"+i);var r=["return function ("+n.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+e+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+a+";","var res;","switch (argLength) {",n.concat(["extra"]).map(function(t,e){return"case "+e+":res = fn.call("+["self"].concat(n.slice(0,e)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],r)(o,t)}(t)};var a="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(t){return function(){var e=Array.prototype.slice.call(arguments),n="function"==typeof e[e.length-1]?e.pop():null,a=this;try{return t.apply(this,arguments).nodeify(n,a)}catch(t){if(null===n||void 0===n)return new o(function(e,n){n(t)});i(function(){n.call(a,t)})}}},o.prototype.nodeify=function(t,e){if("function"!=typeof t)return this;this.then(function(n){i(function(){t.call(e,null,n)})},function(n){i(function(){t.call(e,n)})})}},"3Cgm":function(t,e,n){"use strict";(function(e){function n(t){i.length||(o(),!0),i[i.length]=t}t.exports=n;var o,i=[],a=0,r=1024;function s(){for(;a<i.length;){var t=a;if(a+=1,i[t].call(),a>r){for(var e=0,n=i.length-a;e<n;e++)i[e]=i[e+a];i.length-=a,a=0}}i.length=0,a=0,!1}var c,l,u,f=void 0!==e?e:self,d=f.MutationObserver||f.WebKitMutationObserver;function p(t){return function(){var e=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof d?(c=1,l=new d(s),u=document.createTextNode(""),l.observe(u,{characterData:!0}),o=function(){c=-c,u.data=c}):o=p(s),n.requestFlush=o,n.makeRequestCallFromTimer=p}).call(e,n("DuR2"))},"5xa5":function(t,e){},"8a+7":function(t,e){},"9PbJ":function(t,e,n){"use strict";var o=n("+OTi");t.exports=o;var i=u(!0),a=u(!1),r=u(null),s=u(void 0),c=u(0),l=u("");function u(t){var e=new o(o._n);return e._i=1,e._j=t,e}o.resolve=function(t){if(t instanceof o)return t;if(null===t)return r;if(void 0===t)return s;if(!0===t)return i;if(!1===t)return a;if(0===t)return c;if(""===t)return l;if("object"==typeof t||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(t){return new o(function(e,n){n(t)})}return u(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o(function(t,n){if(0===e.length)return t([]);var i=e.length;function a(r,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof o&&s.then===o.prototype.then){for(;3===s._i;)s=s._j;return 1===s._i?a(r,s._j):(2===s._i&&n(s._j),void s.then(function(t){a(r,t)},n))}var c=s.then;if("function"==typeof c)return void new o(c.bind(s)).then(function(t){a(r,t)},n)}e[r]=s,0==--i&&t(e)}for(var r=0;r<e.length;r++)a(r,e[r])})},o.reject=function(t){return new o(function(e,n){n(t)})},o.race=function(t){return new o(function(e,n){t.forEach(function(t){o.resolve(t).then(e,n)})})},o.prototype.catch=function(t){return this.then(null,t)}},"9bBU":function(t,e,n){n("mClu");var o=n("FeBl").Object;t.exports=function(t,e,n){return o.defineProperty(t,e,n)}},ALOQ:function(t,e,n){"use strict";t.exports=n("+OTi"),n("C8uI"),n("bXFF"),n("9PbJ"),n("/x+h"),n("sWlI")},B5xp:function(t,e,n){"use strict";t.exports=n("ALOQ")},C4MV:function(t,e,n){t.exports={default:n("9bBU"),__esModule:!0}},C8uI:function(t,e,n){"use strict";var o=n("+OTi");t.exports=o,o.prototype.done=function(t,e){(arguments.length?this.then.apply(this,arguments):this).then(null,function(t){setTimeout(function(){throw t},0)})}},EVo3:function(t,e,n){"use strict";e.a={c:"\n            <h1>信息存储</h1>\n            <p>在这里我有个方法推荐给你，仅在微信软件内操作就能保存好信息：</p>\n            <h4>创建一个人的微信群</h4>\n            <p>工作中最让我们头疼的不是信息收不到，而是收到之后淹没在一大堆群聊中，难以找到，甚至如果是图片、文件，在微信群里只有3天的缓存时间，错过就下载不了，如果能将重要信息归类呢？</p>\n            <p>有一个高效的方式是，建立一个只有自己一个人的微信群，当一收到重要信息，立即转发给“私人群”，那就可以把所有的重要信息统一存储起来了。具体操作如下：</p>\n            <p>首先点击微信界面上方的加号，在点击“发起群聊”；</p>\n            a. 在“发起群聊”界面中，选择“面对面建群”，并随机设置入群密码；</p>\n            <p>b. 进入群聊后，一个人的微信群建立完毕，为了方便信息查找可以，把群置顶；</p>\n            <p>c. 重复如此操作，还可以建立多个私人微信群，方便信息的分类存储；</p>\n\n          "}},IYKl:function(t,e,n){"use strict";var o=n("3Cgm"),i=[],a=[],r=o.makeRequestCallFromTimer(function(){if(a.length)throw a.shift()});function s(t){var e;(e=i.length?i.pop():new c).task=t,o(e)}function c(){this.task=null}t.exports=s,c.prototype.call=function(){try{this.task.call()}catch(t){s.onerror?s.onerror(t):(a.push(t),r())}finally{this.task=null,i[i.length]=this}}},W9fW:function(t,e){},Xzrq:function(t,e){},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},bXFF:function(t,e,n){"use strict";var o=n("+OTi");t.exports=o,o.prototype.finally=function(t){return this.then(function(e){return o.resolve(t()).then(function(){return e})},function(e){return o.resolve(t()).then(function(){throw e})})}},fWXo:function(t,e){},jn0u:function(t,e){},kdWB:function(t,e){},mClu:function(t,e,n){var o=n("kM2E");o(o.S+o.F*!n("+E39"),"Object",{defineProperty:n("evD5").f})},mHxk:function(t,e){},sWlI:function(t,e,n){"use strict";var o=n("+OTi");t.exports=o,o.enableSynchronous=function(){o.prototype.isPending=function(){return 0==this.getState()},o.prototype.isFulfilled=function(){return 1==this.getState()},o.prototype.isRejected=function(){return 2==this.getState()},o.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},o.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},o.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},o.disableSynchronous=function(){o.prototype.isPending=void 0,o.prototype.isFulfilled=void 0,o.prototype.isRejected=void 0,o.prototype.getValue=void 0,o.prototype.getReason=void 0,o.prototype.getState=void 0}},ubmg:function(t,e){},"v6+e":function(t,e){},wpTi:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Dd8w"),i=n.n(o),a=n("mvHQ"),r=n.n(a),s=200;localStorage.getItem("id")||localStorage.setItem("id",1111478);var c={getId:function(){var t=parseInt(JSON.parse(localStorage.getItem("id")))+1;return localStorage.setItem("id",t),t},getDate:function(){return(new Date).toLocaleDateString().replace(/\//g,"-")},success:function(t,e){var n=e.data,o=void 0===n?null:n,i=e.msg,a=void 0===i?"success":i;setTimeout(function(){t({code:0,data:o,msg:a})},s)},error:function(t,e){var n=e.data,o=void 0===n?null:n,i=e.msg,a=void 0===i?"error":i;setTimeout(function(){t({code:-1,data:o,msg:a})},s)},storageData:function(t,e){try{return localStorage.setItem(t,r()(e)),!0}catch(t){return console.log(t),!1}},getData:function(t){return JSON.parse(localStorage.getItem(t))||[]},clearData:function(t){localStorage.removeItem(t)}},l=n("B5xp"),u=n.n(l),f={findNotes:function(t){var e=t.bookId;return new u.a(function(t){var n=c.getData("notes").filter(function(t){return t.bookId==e});c.success(t,{data:n})})},createNote:function(t){var e=t.bookId,n=t.index;return new u.a(function(t,o){var i=c.getData("notes"),a=c.getDate(),r=c.getId(),s={bookId:e,id:r,createTime:new Date,title:a,ispublishing:!1,issubmited:!1,words:0,content:""};d.findBook({bookId:e}).then(function(e){1==e.data.length?(-1==n?i.push(s):i.splice(n,0,s),c.storageData("notes",i),c.success(t,{data:s})):c.error(t,{data:null})})})},updateNote:function(t){var e=t.note;return new u.a(function(t,n){for(var o=c.getData("notes"),a=o.length,r=0;r<a;r++){var s=o[r];if(e.noteId==s.id){var l=i()({},s,e);return e.bookId?(o.splice(r,1),o.push(l)):o.splice(r,1,l),c.storageData("notes",o),void c.success(t,{data:l})}}c.error(t,{data:null})})},deleteNote:function(t){t.bookId;var e=t.noteId;return new u.a(function(t,n){for(var o=c.getData("notes"),i=o.length,a=0;a<i;a++){var r=o[a];if(e==r.id)return o.splice(a,1),c.storageData("notes",o),void c.success(t,{data:r})}c.error(t,{data:null})})},findNote:function(t){var e=t.bookId;return new u.a(function(t,n){for(var o=c.getData("notes"),i=o.length,a=0;a<i;a++){var r=o[a];if(e==r.bookId)return void c.success(t,{data:r})}c.success(t,{data:null})})},findNoteById:function(t){var e=t.noteId;return new u.a(function(t,n){for(var o=c.getData("notes"),i=o.length,a=0;a<i;a++){var r=o[a];if(e==r.id)return void c.success(t,{data:r})}c.success(t,{data:null})})},deleteNotes:function(t){var e=t.bookId;return new u.a(function(t,n){var o=c.getData("notes"),i=[];o.forEach(function(t,n){e==t.bookId&&i.push(o.splice(n,1))}),c.storageData("notes",o),c.success(t,{data:i})})}},d={findBook:function(t){var e=t.bookId;return new u.a(function(t){t({code:0,data:c.getData("books").filter(function(t){return t.id==e})})})},findBooks:function(){return new u.a(function(t){t({code:0,data:c.getData("books")})})},createBook:function(t){var e=t.name;return new u.a(function(t,n){var o=c.getData("books"),i={id:c.getId(),name:e};o.unshift(i),c.storageData("books",o),c.success(t,{data:i})})},deleteBook:function(t){var e=t.bookId;return new u.a(function(t,n){for(var o=c.getData("books"),i=o.length,a=!1;i--;)if(o[i].id==e){a=!0;break}a?f.deleteNotes({bookId:e}).then(function(e){console.log(e),0===e.code&&(o.splice(i,1),c.storageData("books",o),c.success(t,{data:o}))}):c.error(n,{data:null})})},updateBook:function(t){var e=t.bookId,n=t.book;return new u.a(function(t,o){for(var a=c.getData("books"),r=a.length;r--;)if(a[r].id==e)return a[r]=i()({},a[r],n),c.storageData("books",a),void c.success(t,{data:a});c.error(o,{data:null})})}};var p=i()({},d,f,{init:function(){0==c.getData("books").length&&p.createBook({name:"日记本"}).then(function(t){p.createNote({bookId:t.data.id,index:0}).then(function(t){})})}}),v=(n("fWXo"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"toolwrap"},[e("i",{directives:[{name:"toggle",rawName:"v-toggle",value:{toggleOpen:this.toggleOpen},expression:"{toggleOpen}"}],staticClass:"fa fa-gear"}),this._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"toolop"},[this._t("default")],2)])},staticRenderFns:[]});var h,m,g=n("VU/8")({data:function(){return{show:!1}},methods:{toggleOpen:function(t){this.show=t}}},v,!1,function(t){n("v6+e")},null,null).exports,_=[{msg:"修改文集",icon:"fa-pencil-square-o"},{msg:"删除文集",icon:"fa-trash-o"}],k={props:{ops:Object},data:function(){return{arr:_}},components:{PopTool:g},methods:{run:function(t){this.ops&&this.ops[t]&&this.ops[t]()}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pop-tool",t._l(t.arr,function(e,o){return n("li",{on:{click:function(e){t.run(o)}}},[n("i",{staticClass:"fa",class:e.icon}),t._v(" "+t._s(e.msg)+"\n  ")])}))},staticRenderFns:[]},C=0,y={data:function(){return{books:[],foldername:"",iscreating:!1}},components:{BookTool:n("VU/8")(k,b,!1,null,null,null).exports},mounted:function(){this.findBooks()},methods:{updateBook:function(){var t=this;p.updateBook({bookId:h.id,book:{name:this.foldername}}).then(function(e){m=!1,t.toggleCreate(!1),0===e.code&&t.findBooks()})},initUpdateBook:function(){m=!0,this.foldername=h.name,this.toggleCreate(!0)},removeBook:function(){var t=this;p.deleteBook({bookId:h.id}).then(function(e){t.books.length-1==C&&(C-=1),0==e.code&&t.findBooks()})},toggleCreate:function(t){this.iscreating=t,t?this.$refs.bookinput.focus():this.foldername=""},openBook:function(t,e){var n=this;h=t,C=e,this.$route.params.book_id!=t.id&&p.findNote({bookId:t.id}).then(function(e){var o=e.data,i="/writer/notebooks/"+t.id;o&&(i=i+"/notes/"+o.id),n.$router.push(i)})},findBooks:function(){var t=this;p.findBooks().then(function(e){0===e.code&&(t.books=e.data,e.data.length>0?e.data[C]?t.openBook(e.data[C]):t.openBook(e.data[0]):t.$router.push("/writer"))})},createBook:function(){var t=this;m?this.updateBook():p.createBook({name:this.foldername}).then(function(e){t.toggleCreate(!1),0===e.code&&t.findBooks()})}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"folder-b-p"},[n("div",{staticClass:"return-home-btn"},[n("router-link",{attrs:{to:"/"}},[t._v("回首页")])],1),t._v(" "),n("div",{staticClass:"folder-create"},[n("a",{staticClass:"folder-c-btn",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.toggleCreate(!0)}}},[n("i",{staticClass:"fa fa-plus"}),t._v("\n        新建文集\n    ")]),t._v(" "),n("form",{staticClass:"folder-from",class:{open:t.iscreating}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.foldername,expression:"foldername"}],ref:"bookinput",staticClass:"folder-name",attrs:{type:"text",placeholder:"请输入文集名...",name:"foldername"},domProps:{value:t.foldername},on:{input:function(e){e.target.composing||(t.foldername=e.target.value)}}}),t._v(" "),n("button",{staticClass:"f-btn  f-submit-btn",on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.createBook(e)}}},[t._v("提 交")]),t._v(" "),n("button",{staticClass:"f-btn f-cancel-btn",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.toggleCreate(!1)}}},[t._v("取 消")])])]),t._v(" "),n("ul",{staticClass:"folder-lists"},t._l(t.books,function(e,o){return n("li",{key:e.id,staticClass:"folder-line",class:{"router-link-active":t.$route.params.book_id==e.id},attrs:{href:"javascript:void(0);",title:e.name},on:{click:function(n){t.openBook(e,o)}}},[t.$route.params.book_id==e.id?n("book-tool",{attrs:{ops:{0:t.initUpdateBook,1:t.removeBook}}}):t._e(),t._v(" "),n("span",[t._v(t._s(e.name))])],1)})),t._v(" "),n("div",{staticClass:"config-set-panel"}),t._v(" "),n("div",{staticClass:"problem-btn"})])},staticRenderFns:[]};var x=n("VU/8")(y,w,!1,function(t){n("yEKV")},null,null).exports,N={props:{ops:Object},data:function(){return{books:[]}},components:{PopTool:g},methods:{run:function(t,e){1==t?this.ops[t]&&this.ops[t](e):this.ops[t]&&this.ops[t]()},getbook:function(){var t=[];this.$emit("getBooks",t),this.books=t}}},j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("pop-tool",[n("li",[n("i",{staticClass:"fa fa-share"}),t._v(" 直接发布\n  ")]),t._v(" "),n("li",{staticClass:"sub-show-tigger",on:{mouseenter:t.getbook}},[n("i",{staticClass:"fa fa-folder-open"}),t._v(" 移动文章\n    "),n("div",{staticClass:"sub-l-tool"},[n("ul",t._l(t.books,function(e){return n("li",{key:e.id,on:{click:function(n){t.run(1,e.id)}}},[t._v(t._s(e.name))])}))])]),t._v(" "),n("li",[n("i",{staticClass:"fa fa-clock-o"}),t._v(" 历史版本\n  ")]),t._v(" "),n("li",{on:{click:function(e){t.run(3)}}},[n("i",{staticClass:"fa fa-trash-o"}),t._v(" 删除文章\n  ")])])},staticRenderFns:[]};var I,$,B=n("VU/8")(N,j,!1,function(t){n("jn0u")},null,null).exports,E={isSaving:!1,title:""},D={getNote:function(t){return I||(I=t.$root.$children[0].$children[0].$refs.note),I},getBook:function(t){return $||($=t.$root.$children[0].$children[0].$refs.book),$}},T={props:{text:String},data:function(){return{show:!1,display:!1}},watch:{show:function(t,e){var n=this;t!=e&&(t?this.display=!0:setTimeout(function(){n.display=!1},200))}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"loading-layer",class:{show:this.show,display:this.display}},[e("span",{staticClass:"loading-wrap"},[e("svg",{staticClass:"load",attrs:{viewBox:"0 0 50 50"}},[e("circle",{staticClass:"loading",attrs:{cx:"25",cy:"25",r:"20"}})]),this._v(" "),e("div",{staticClass:"load-text"},[this._v(this._s(this.text))])])])},staticRenderFns:[]};var S,F=n("VU/8")(T,R,!1,function(t){n("8a+7")},null,null).exports,O=0,V={},P={data:function(){return{notes:null,d:E}},components:{NoteTool:B,Loading:F},methods:{moveto:function(t){var e=this,n={bookId:t,noteId:this.$route.params.note_id};p.updateNote({note:n}).then(function(t){e.findNotes(void 0,0)})},removeNote:function(){var t=this,e=this.$route.params.book_id,n=S.id;p.deleteNote({bookId:e,noteId:n}).then(function(n){0==n.code&&(0!==O&&(O-=1),t.findNotes(e,O))})},getBooks:function(t){for(var e=this.$route.params.book_id,n=D.getBook(this).books,o=n.length;o--;){var i=n[o];e!=i.id&&t.unshift({name:i.name,id:i.id})}return t},getNote:function(){return S},openNote:function(t){var e=this.$route.params.book_id;S=t,O=this.notes.indexOf(t),this.$router.push("/writer/notebooks/"+e+"/notes/"+t.id)},freshNote:function(t){for(var e=this.$route.params.note_id,n=this.notes.length,o=0;o<n;o++)e==this.notes[o].id&&this.notes.splice(o,1,t)},findNotes:function(t,e){var n=this;V.show=!0,setTimeout(function(){var t=t||n.$route.params.book_id;p.findNotes({bookId:t}).then(function(t){V.show=!1,0===t.code&&(n.notes=t.data,void 0===e&&(e=O),-1==e&&(e=n.notes.length+e),n.openNote(t.data[e]))})},50)},createNote:function(t){var e=this,n=this.$route.params.book_id;p.createNote({bookId:n,index:t}).then(function(o){0==o.code&&e.findNotes(n,t)})}},mounted:function(){var t=this;V=this.$refs.loading,setTimeout(function(){var e=t.$route.params.book_id;e&&t.findNotes(e,0)},50)},watch:{$route:function(t,e){var n=t.params&&t.params.book_id,o=e.params&&e.params.book_id;t.params&&t.params.note_id,e.params&&e.params.note_id;n?n!=o&&this.findNotes(n,0):this.notes=[]}}},H={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"catalog-p"},[n("a",{staticClass:"file-create-btn",on:{click:function(e){e.preventDefault(),t.createNote(0)}}},[n("i",{staticClass:"fa fa-plus-circle"}),t._v(" 新建文章\n")]),t._v(" "),n("div",{staticClass:"file-lists"},t._l(t.notes,function(e){return n("a",{key:e.id,staticClass:"file-lists-line",class:{active:t.$route.params.note_id==e.id},on:{click:function(n){n.preventDefault(),t.openNote(e)}}},[t.$route.params.note_id==e.id?n("note-tool",{attrs:{ops:{1:t.moveto,3:t.removeNote}},on:{getBooks:t.getBooks}}):t._e(),t._v(" "),n("i",{staticClass:"file-icon"}),t._v(" "),n("div",{staticClass:"set-btn"}),t._v(" "),n("span",{staticClass:"title"},[t._v(t._s(e.title))]),t._v(" "),n("span",{staticClass:"sub-title"},[t._v(t._s(e.sub_title))]),t._v(" "),n("span",{staticClass:"tip-msg"},[t._v("字数："+t._s(e.words))])],1)})),t._v(" "),n("a",{staticClass:"file-create-btn-b",on:{click:function(e){e.preventDefault(),t.createNote(-1)}}},[n("i",{staticClass:"fa fa-plus"}),t._v("\n     在下方创建文章\n   ")]),t._v(" "),n("loading",{ref:"loading",attrs:{text:"文章加载中..."}})],1)},staticRenderFns:[]};var M=n("VU/8")(P,H,!1,function(t){n("Xzrq")},null,null).exports,L=(n("SLkj"),n("EVo3"));function U(t){if(t){var e=e||document.querySelector("#contenteditor");for(3==t.nodeType&&(t=t.parentNode);t.parentNode!=e;)t=t.parentNode;return t}}var A={data:function(){return{}},methods:{toggleExec:function(t){var e=e||document.querySelector("#contenteditor"),n=window.getSelection(),o=document.createRange(),i=n.anchorNode,a=U(n.focusNode);if(i)if(i=U(i),n.isCollapsed||i==a)o.selectNodeContents(i),n.removeAllRanges(),n.addRange(o),i.nodeName==t?document.execCommand("formatBlock",!1,"p"):document.execCommand("formatBlock",!1,t);else{var r=Array.prototype.slice.call(e.children),s=r.indexOf(i),c=r.indexOf(a);if(c<s){var l=s;s=c,c=l}var u=r.slice(s,c+1),f=u.every(function(e){return e.nodeName==t});u.forEach(function(e){(o=document.createRange()).selectNodeContents(e),n.removeAllRanges(),n.addRange(o),f?document.execCommand("formatBlock",!1,"p"):document.execCommand("formatBlock",!1,t)}),n.removeAllRanges(),(o=document.createRange()).setStart(e.children[s],0);var d=e.children[c];if(0==d.children.length)o.setEnd(d,1);else{var p=d.childNodes,v=p[p.length-1];3==v.nodeType?o.setEnd(v,v.textContent.length):o.setEnd(v,1)}n.addRange(o)}},quote:function(){},exec:function(t){document.execCommand(t)||console.log(t+" exec error!")},copy:function(){document.execCommand("copy")},post:function(){var t=t||document.querySelector("#contenteditor");L.a.c=t.innerHTML}}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"editor-tool-wrap clearfix"},[n("li",{staticClass:"sp-fr send-btn"},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:t.post}},[n("i",{staticClass:"fa fa-mail-forward"}),t._v("\n        发布文章\n      ")])]),t._v(" "),n("li",[n("a",{staticClass:"fa fa-bold has-sub",attrs:{href:"javascript:void(0)"}}),t._v(" "),n("ul",{staticClass:"sub-tool"},[n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"粗体"},expression:"{content:'粗体'}"}],staticClass:"fa fa-bold",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.exec("bold")}}})]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"斜体"},expression:"{content:'斜体'}"}],staticClass:"fa fa-italic",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.exec("italic")}}})]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"删除线"},expression:"{content:'删除线'}"}],staticClass:"fa fa-strikethrough",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.exec("strikethrough")}}})]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"引用"},expression:"{content:'引用'}"}],staticClass:"fa fa-quote-left",attrs:{href:"javascript:void(0)"},on:{click:t.quote}})])])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"top",content:"插入图片"},expression:"{pos:'top',content:'插入图片'}"}],staticClass:"fa fa-picture-o",attrs:{href:"javascript:void(0)"}},[n("input",{staticClass:"input-file-hide",attrs:{type:"file"}})])]),t._v(" "),n("li",[n("a",{staticClass:"fa fa-undefined has-sub",attrs:{href:"javascript:void(0)"}},[t._v("H1")]),t._v(" "),n("ul",{staticClass:"sub-tool"},[n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"标题1"},expression:"{content:'标题1'}"}],staticClass:"fa fa-undefined",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.toggleExec("H1")}}},[t._v("H1")])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"标题2"},expression:"{content:'标题2'}"}],staticClass:"fa fa-undefined",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.toggleExec("H2")}}},[t._v("H2")])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"标题3"},expression:"{content:'标题3'}"}],staticClass:"fa fa-undefined",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.toggleExec("H3")}}},[t._v("H3")])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:"标题4"},expression:"{content:'标题4'}"}],staticClass:"fa fa-undefined",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.toggleExec("H4")}}},[t._v("H4")])])])]),t._v(" "),n("li",[n("a",{staticClass:"fa fa-undefined has-sub",attrs:{href:"javascript:void(0)"}},[t._v("一")]),t._v(" "),n("ul",{staticClass:"sub-tool"},[n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"right",content:"分割线"},expression:"{pos:'right',content:'分割线'}"}],staticClass:"fa fa-undefined",attrs:{href:"javascript:void(0)"}},[t._v("—")])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"right",content:"插入连接"},expression:"{pos:'right',content:'插入连接'}"}],staticClass:"fa fa-link",attrs:{href:"javascript:void(0)"}})]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"right",content:"插入视频"},expression:"{pos:'right',content:'插入视频'}"}],staticClass:"fa fa-youtube-play",attrs:{href:"javascript:void(0)"}})])])]),t._v(" "),n("li",[n("a",{staticClass:"fa fa-undo has-sub",attrs:{href:"javascript:void(0)"}}),t._v(" "),n("ul",{staticClass:"sub-tool"},[n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"right",content:"撤销"},expression:"{pos:'right',content:'撤销'}"}],staticClass:"fa fa-undo",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.exec("undo")}}})]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"right",content:"重做"},expression:"{pos:'right',content:'重做'}"}],staticClass:"fa fa-repeat",attrs:{href:"javascript:void(0)"},on:{click:function(e){t.exec("redo")}}})])])]),t._v(" "),n("li",[n("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{pos:"top",content:"历史版本"},expression:"{pos:'top',content:'历史版本'}"}],staticClass:"fa fa-clock-o",attrs:{href:"javascript:void(0)"},on:{click:t.copy}})]),t._v(" "),t._m(0),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"sp-fr"},[e("a",{staticClass:"fa fa-expand",attrs:{href:"javascript:void(0)"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",{staticClass:"sp-fr"},[e("a",{staticClass:"fa fa-floppy-o",attrs:{href:"javascript:void(0)"}})])}]};var q,X=n("VU/8")(A,W,!1,function(t){n("kdWB")},null,null).exports,J=n("Zrlr"),K=n.n(J),Q=n("wxAW"),z=n.n(Q),Y=(function(){function t(){K()(this,t)}z()(t,[{key:"name",get:function(){return q},set:function(t){q=t}}])}(),{data:function(){return{content:""}},mounted:function(){this.init()},methods:{paste:function(t){console.log(t);var e=t.clipboardData.getData("text/html"),n=document.createElement("div");n.innerHTML=e,console.log(n.innerText)},change:function(){console.log("change-----")},addp:function(t,e){var n=document.createElement("p");if(n.innerHTML="<br>",e){t.insertBefore(n,e);var o=window.getSelection(),i=document.createRange();o.removeAllRanges(),i.selectNode(n),i.setEnd(n,0),o.addRange(i)}else t.appendChild(n)},init:function(){var t=this.$el.children[0];if(t.innerHTML=L.a.c,t.focus(),0==t.innerHTML.trim().length)this.addp(t);else{var e=window.getSelection(),n=document.createRange();n.selectNodeContents(t.lastChild),e.removeAllRanges(),e.addRange(n)}},enter:function(t){var e=t.target,n=window.getSelection().anchorNode;"DIV"==n.nodeName&&(this.addp(e,n),e.removeChild(n))},backspace:function(t){var e=t.target;0==e.innerHTML.length&&this.addp(e)},input:function(t){console.log("input-----")}},watch:{$route:function(t,e){this.init()}}}),Z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edt-area-wrap"},[n("div",{staticClass:"edt-area",attrs:{id:"contenteditor",contenteditable:"true"},on:{paste:t.paste,change:t.change,keyup:[function(e){return"button"in e||8===e.keyCode?t.backspace(e):null},function(e){return"button"in e||13===e.keyCode?t.enter(e):null}],input:t.input}})])},staticRenderFns:[]};var G="",tt={data:function(){return{d:E,loadingdata:!1}},methods:{saveTitle:function(){var t=this;if(!E.isSaving&&G!=E.title){G=E.title,E.isSaving=!0;var e=this.$route,n={title:E.title,noteId:e.params.note_id};p.updateNote({note:n}).then(function(e){D.getNote(t).freshNote(e.data),E.isSaving=!1})}},openNode:function(){var t=this;this.$refs.loading&&(this.$refs.loading.show=!0),setTimeout(function(){p.findNoteById({noteId:t.$route.params.note_id}).then(function(e){0===e.code&&(E.title=e.data.title),t.$refs.loading&&(t.$refs.loading.show=!1)})},100)},init:function(){}},mounted:function(){this.openNode()},watch:{$route:function(t,e){(t.params&&t.params.note_id)!=(e.params&&e.params.note_id)&&this.openNode()}},components:{EditorHeader:X,EditorTextarea:n("VU/8")(Y,Z,!1,function(t){n("mHxk")},null,null).exports,Loading:F}},et={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-page"},[n("span",{staticClass:"save-tip"},[t._v(t._s(t.d.isSaving?"保存中...":"已保存"))]),t._v(" "),n("div",{staticClass:"edt-container"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.d.title,expression:"d.title"}],staticClass:"title",attrs:{type:"text"},domProps:{value:t.d.title},on:{input:[function(e){e.target.composing||t.$set(t.d,"title",e.target.value)},t.saveTitle]}}),t._v(" "),n("editor-header"),t._v(" "),n("editor-textarea")],1),t._v(" "),n("loading",{ref:"loading",attrs:{text:"内容加载中..."}})],1)},staticRenderFns:[]};var nt={data:function(){return{has_not_note:!0}},components:{Editor:n("VU/8")(tt,et,!1,function(t){n("ubmg")},null,null).exports}},ot={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"edit-container"},[this.$route.params.note_id?e("div",{staticClass:"editor-wrap"},[e("editor")],1):e("span",{staticClass:"default"},[this._v("简书")])])},staticRenderFns:[]};var it=n("VU/8")(nt,ot,!1,function(t){n("W9fW")},null,null).exports;p.init();var at={components:{BookCategory:x,NoteCategory:M,EditContainer:it}},rt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"notebook-p"},[e("div",{staticClass:"editor-layout"},[e("book-category",{ref:"book",staticClass:"ae-l"}),this._v(" "),e("div",{staticClass:"ae-r"},[e("note-category",{ref:"note",staticClass:"ae-r-l"}),this._v(" "),e("div",{staticClass:"ae-r-r"},[e("edit-container")],1)],1)],1)])},staticRenderFns:[]};var st=n("VU/8")(at,rt,!1,function(t){n("5xa5")},null,null);e.default=st.exports},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var o,i=n("C4MV"),a=(o=i)&&o.__esModule?o:{default:o};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,a.default)(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}()},yEKV:function(t,e){}});